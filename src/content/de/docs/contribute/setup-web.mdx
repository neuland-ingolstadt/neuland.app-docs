import { Callout } from 'nextra/components'

# Web-Entwicklungsumgebung einrichten

<Callout type="warning">
Die folgende Sektion beschreibt den leichtgewichtigen Einrichtungsprozess für die Web-App, der eine schnellere Entwicklung und Tests ermöglicht.
Für native Funktionen und nicht webbezogene Fehlerbehebungen, siehe den [vollständigen Einrichtungsleitfaden](/docs/contribute/setup), der die Einrichtung der mobilen App-Umgebung beinhaltet.
</Callout>

## Voraussetzungen

1. Forke das Repository und klone es auf deinen lokalen Rechner.
2. Installiere die erforderliche Software:

   - [Visual Studio Code](https://code.visualstudio.com/)
   - [Docker Desktop](https://www.docker.com/get-started/) (optional, für CORS-Proxy)

3. Installiere die benötigten Abhängigkeiten:

   - [Node.js](https://nodejs.org/en/) 22 LTS oder höher
   - [Bun](https://bun.sh) oder nutze npm, wenn du die Abhängigkeiten nicht änderst

4. Es wird empfohlen, die [Biome](https://marketplace.visualstudio.com/items?itemName=biomejs.biome) Erweiterung für deine IDE zu verwenden, um Echtzeit-Feedback zu deinem Code zu erhalten.

5. Installiere die Projektabhängigkeiten, indem du den folgenden Befehl im Projektverzeichnis ausführst:

   ```sh
   bun install
   ```

6. Kopiere die `.env.local.example` Datei in `.env.local` und fülle die Variablen aus.
   \
   Siehe die [Hinweise](/docs/contribute/contribute#entwickler) zum API-Schlüssel.

```env filename=".env.local"
EXPO_PUBLIC_THI_API_KEY=abc123
```

## Entwicklung

1. Erstelle einen neuen Branch von deinem Fork, um zum Projekt beizutragen. Verwende einen beschreibenden Branch-Namen.
2. Mache deine Änderungen und stelle sicher, dass der Code unserem Coding-Stil und den Konventionen folgt.
3. Starte die App lokal mit Expo, indem du folgenden Befehl im Projektverzeichnis ausführst:

   ```sh
   bun web
   ```

<Callout type="info">
Detailierte Informationen zum Beitragen am Projekt und zum Code-Stil findest du im
[vollständigen Einrichtungsleitfaden](/docs/contribute/setup#anderungen-commiten).
</Callout>

<Callout type="important">
Aufgrund der CORS Regeln der THI API, welche localhost nicht erlauben, musst du einen Proxy oder eine Browser-Erweiterung verwenden, um die API im Browser zu verwenden.
</Callout>

## CORS-Proxy einrichten

Um die THI API während der lokalen Entwicklung nutzen zu können, wird empfohlen, den [Neuland CORS Proxy](https://github.com/neuland-ingolstadt/neuland-next-proxy) zu verwenden.

<Callout type="warning">
Der Proxy ist nur für die lokale Entwicklung gedacht und sollte **nicht** in Produktionsumgebungen verwendet werden!
</Callout>

### Mit Docker (Empfohlen)

Die einfachste Methode ist die Verwendung von Docker:

```sh
docker run -p 3001:3001 ghcr.io/neuland-ingolstadt/neuland-next-proxy:latest
```

Der Proxy läuft nun auf `http://localhost:3001`.

**Optional:** Verwende einen anderen Port:

```sh
docker run -p 8080:8080 -e PORT=8080 ghcr.io/neuland-ingolstadt/neuland-next-proxy:latest
```

### Manuelle Installation

Alternativ kannst du den Proxy auch manuell installieren:

1. Klone das Proxy-Repository:

   ```sh
   git clone https://github.com/neuland-ingolstadt/neuland-next-proxy.git
   cd neuland-next-proxy
   ```

2. Installiere die Abhängigkeiten:

   ```sh
   pnpm install
   ```

3. Starte den Proxy-Server:

   ```sh
   pnpm dev
   ```

### Neuland Next Web konfigurieren

Füge die folgende Umgebungsvariable zu deiner `.env.local` Datei hinzu:

```env filename=".env.local"
EXPO_PUBLIC_ENDPOINT_HOST=http://localhost:3001
```

Jetzt kannst du die Web-App mit `bun web` starten und die THI API wird über den Proxy aufgerufen.
